<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>
            咨询统计
        </title>
        <meta name="renderer" content="webkit">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="format-detection" content="telephone=no">
        <link rel="stylesheet" href="./layui/css/layui.css"  media="all">
        <script src="./js/url.js" charset="utf-8"></script>
        <script src="./js/function.js" charset="utf-8"></script>
        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <script src="./js/echarts.min.js"></script>
    </head>
    <body>
        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
            <legend>首页 / 咨询管理 / 咨询统计</legend>
        </fieldset>
        <div style="text-align: center;">
            <div id="main" style="width: 800px;height:400px;margin: 0 auto;"></div>
            <div id="main2" style="width: 1000px;height:400px;margin: 0 auto;"></div>
        </div>
        <script>
            // 绘制图表
            var myChart = echarts.init(document.getElementById('main'));
            myChart.setOption({
                color: ['#37A2DA', '#32C5E9', '#67E0E3', '#9FE6B8', '#FFDB5C','#ff9f7f', '#fb7293', '#E062AE', '#E690D1', '#e7bcf3', '#9d96f5', '#8378EA', '#96BFFF'],
                title: {
                    text: '各种报名统计'
                },
                tooltip : {
                    trigger: 'item',
                    formatter: "{a} <br/>{b} : {c} ({d}%)"
                },
                series: {
                        type: 'pie',
                        radius : '55%',
                        center: ['40%', '60%'],
                        data: [
                            {name: 'A', value: 1212},
                            {name: 'B', value: 2323},
                            {name: 'C', value: 1919}
                        ],
                        itemStyle:{
                            normal:{
                                label:{
                                    show: true,
                                    formatter: '{b} : {c} ({d}%)'
                                },
                                labelLine :{show:true}
                            }
                        }
                    }
            });
            myChart.showLoading();
            $.ajax({
                type: "POST",
                url:  remoteURL+"/Consult/statistic.do",
                data: {},
                dataType: "json",
                async: false,
                success: function(result){
                    if (result) {
                        myChart.hideLoading();    //隐藏加载动画
                        myChart.setOption({        //加载数据图表
                            series: [{
                                // 根据名字对应到相应的系列
                                name: '数量',
                                data: result
                            }]
                        });

                    }
                }
            });
        </script>
        <script>
            // 基于准备好的dom，初始化echarts实例
            var myChart2 = echarts.init(document.getElementById('main2'));

            // 指定图表的配置项和数据
            var option = {
                color: ['#37A2DA', '#32C5E9', '#67E0E3', '#9FE6B8', '#FFDB5C','#ff9f7f', '#fb7293', '#E062AE', '#E690D1', '#e7bcf3', '#9d96f5', '#8378EA', '#96BFFF'],
                title: {
                    text: '每月数据统计'
                },
                tooltip: {},
                legend: {
                    data:['数量']
                },
                xAxis: {
                    data: ["衬衫","羊毛衫","雪纺衫","裤子","高跟鞋","袜子"]
                },
                yAxis: {},
                series: [{
                    name: '数量',
                    type: 'bar',
                    data: [5, 20, 36, 10, 10, 20]
                }]
            };

            // 使用刚指定的配置项和数据显示图表。
            myChart2.setOption(option);

            myChart2.showLoading();
            $.ajax({
                type: "POST",
                url:  remoteURL+"/Consult/statisticMonth.do",
                data: {year:2018},
                dataType: "json",
                async: false,
                success: function(result){
                    if (result) {
                        myChart2.hideLoading();    //隐藏加载动画
                        myChart2.setOption({        //加载数据图表
                            xAxis: {
                                data: result.x
                            },
                            series: [{
                                name: '数量',
                                type: 'bar',
                                barWidth : 28,//柱图宽度
                                data: result.y
                            }]
                        });
                    }
                }
            });
        </script>
    </body>
</html>